---
import { ExternalLink } from "lucide-react";
import { Badge } from "./ui/badge";
import { Button } from "./ui/button";
import { Image } from "astro:assets";
import placeHolderImage from "../../public/placeholder.svg";
import { type ImageMetadata } from "astro";
import { slugify } from "@/lib/utils";

interface Props {
  title: string;
  description: string;
  image?: ImageMetadata;
  technologies: string[];
  liveUrl?: string;
  githubUrl?: string;
}

const { title, description, image, technologies, liveUrl, githubUrl } = Astro.props;
const slug = `/projects/${slugify(title)}/`;
---

<div
  class="group relative flex flex-col overflow-hidden rounded-xl border border-accent transition-all hover:border-primary/50"
>
  {/* Project Image */}
  <div class="relative overflow-hidden bg-accent">
    <Image
      src={image || placeHolderImage}
      alt={title}
      class="object-cover w-full object-center h-48 transition-transform duration-300 group-hover:scale-105"
    />
  </div>

  {/* Content */}
  <div class="flex-1 flex flex-col p-6">
    <h3 class="text-xl font-semibold mb-2">{title}</h3>
    <p class="text-muted-foreground mb-4">{description}</p>

    {/* Technologies */}
    <div class="flex flex-wrap gap-2 mb-6">
      {
        technologies.map((tech) => (
          <Badge key={tech} variant="secondary" className="rounded-full">
            {tech}
          </Badge>
        ))
      }
    </div>

    {/* Actions */}
    <div class="flex gap-3 mt-auto">
      {
        liveUrl && (
          <Button variant="default" className="rounded-full">
            <a href={liveUrl} target="_blank" rel="noopener noreferrer">
              Live Demo
            </a>
          </Button>
        )
      }
      {
        githubUrl && (
          <Button variant="outline" className="rounded-full shadow-none">
            <a href={githubUrl} target="_blank" rel="noopener noreferrer">
              View Code
            </a>
          </Button>
        )
      }
      <Button variant="outline" className="rounded-full shadow-none ml-auto">
        <a href={slug}> Project Details </a>
      </Button>
    </div>
  </div>
</div>
